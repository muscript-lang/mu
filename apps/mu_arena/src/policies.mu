@apps.mu_arena.policies{E[main,choose_action,Baseline,Aggressive,Defensive,Attack,Defend,Heal,Special,Decision];T PolicyId=Baseline|Aggressive|Defensive;T Action=Attack|Defend|Heal|Special;T Roll=Roll(i32,i32);T Decision=Decision(Action,i32);F abs_i32:(i32)->i32=i(c(<,arg0,0),c(neg,arg0),arg0);F next_seed:(i32)->i32=c(%,c(+,c(*,c(abs_i32,arg0),1103),97),1000003);F roll100:(i32)->Roll=v(n:i32=c(next_seed,arg0),Roll(c(%,n,100),n));F choose_baseline:(i32,i32)->Decision=i(c(<,arg0,10),Decision(Heal(),arg1),v(r:Roll=c(roll100,arg1),m(r){Roll(v,next)=>i(c(<,v,60),Decision(Attack(),next),i(c(<,v,80),Decision(Defend(),next),Decision(Special(),next)));}));F choose_aggressive:(i32,i32)->Decision=i(c(<,arg0,8),Decision(Heal(),arg1),v(r:Roll=c(roll100,arg1),m(r){Roll(v,next)=>i(c(<,v,70),Decision(Attack(),next),i(c(<,v,95),Decision(Special(),next),i(c(<,v,98),Decision(Defend(),next),Decision(Heal(),next))));}));F choose_defensive:(i32,i32)->Decision=i(c(<,arg0,15),Decision(Heal(),arg1),v(r:Roll=c(roll100,arg1),m(r){Roll(v,next)=>i(c(<,v,35),Decision(Attack(),next),i(c(<,v,70),Decision(Defend(),next),i(c(<,v,90),Decision(Heal(),next),Decision(Special(),next))));}));F choose_action:(PolicyId,i32,i32)->Decision=m(arg0){Baseline=>c(choose_baseline,arg1,arg2);Aggressive=>c(choose_aggressive,arg1,arg2);Defensive=>c(choose_defensive,arg1,arg2);};F main:()->i32={v(a:Decision=c(choose_action,Baseline(),20,1),v(b:Decision=c(choose_action,Baseline(),20,1),a(c(==,a,b))));v(a1:Decision=c(choose_action,Aggressive(),14,1),v(d1:Decision=c(choose_action,Defensive(),14,1),a(c(!=,a1,d1))));0};}
